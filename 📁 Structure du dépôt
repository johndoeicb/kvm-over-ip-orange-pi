kvm-over-ip-orange-pi/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.py                # Interface Flask
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ index.html        # Interface web simple
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ start_vpn.sh          # Lance OpenVPN en arriÃ¨re-plan
â”‚   â””â”€â”€ wol.sh                # Envoie un paquet Wake-on-LAN
â”œâ”€â”€ static/
â”‚   â””â”€â”€ style.css             # (Optionnel) Style minimal
â”œâ”€â”€ mjpg-streamer/            # ClonÃ© depuis GitHub (non modifiÃ© ici)
â”œâ”€â”€ requirements.txt          # DÃ©pendances Python
â”œâ”€â”€ README.md                 # PrÃ©sentation complÃ¨te
â””â”€â”€ schema.png                # SchÃ©ma visuel du systÃ¨me
ğŸ§  1. app.py (Flask minimal avec boutons)
python
Copy
Edit
from flask import Flask, render_template, request
import subprocess

app = Flask(__name__)

ALLOWED_IP = "192.168.1.100"  # Adresse IP autorisÃ©e

@app.before_request
def limit_remote_addr():
    if request.remote_addr != ALLOWED_IP:
        return "AccÃ¨s refusÃ©", 403

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/start-vpn')
def start_vpn():
    subprocess.Popen(['bash', './scripts/start_vpn.sh'])
    return "VPN dÃ©marrÃ©."

@app.route('/wake-server')
def wake_server():
    subprocess.call(['bash', './scripts/wol.sh'])
    return "Paquet WOL envoyÃ©."

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
ğŸ§¾ 2. requirements.txt
ini
Copy
Edit
Flask==2.3.3
ğŸ–¥ï¸ 3. index.html (interface trÃ¨s simple)
html
Copy
Edit
<!DOCTYPE html>
<html>
<head>
  <title>KVM Control Panel</title>
</head>
<body>
  <h1>KVM over IP â€“ Orange Pi</h1>
  <button onclick="fetch('/wake-server')">RÃ©veiller le serveur</button>
  <button onclick="fetch('/start-vpn')">DÃ©marrer VPN</button>
</body>
</html>
ğŸ§° 4. start_vpn.sh
bash
Copy
Edit
#!/bin/bash
sudo openvpn --config /etc/openvpn/client.conf --daemon
ğŸŒ 5. wol.sh
bash
Copy
Edit
#!/bin/bash
etherwake -i eth0 AA:BB:CC:DD:EE:FF
(Remplace l'adresse MAC par celle de ton serveur Proxmox.)
